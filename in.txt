{
#include <iostream>
}

let upper    = ['A'-'Z']
let lower    = ['a'-'z']
let digit    = ['0'-'9']
let space    = [' ' '\n' '\t' '\r']
let alphanum = upper|lower|digit

rule tokenize : void = parse 
| "my name is " (upper | lower) as name 
{
    std::cout << "Hello, " << name << "how are you?" << std::endl;
}
| (lower|upper|'_') (alphanum|'_')* as id 
{ 
    std::cout << "ID : " << id << std::endl;
}
| space+
{
    std::cout << "SPACE" << std::endl;
}
| eof 
{ 
    std::cout << "EOF" << std::endl;
}
| _ 
{ 
    throw std::logic_error("Unparsable"); 
}

{
int main()
{
    std::string idSample = "identifierName_isThis321_ id2";
    __lexgen_lexbuf buf{idSample};
    while (!buf.isEof())
    {
        tokenize(buf);
    }
    return 0;
}
}